<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WYSIWYG HTML Editor</title>
  <style>
    body { margin:0; font-family:Segoe UI, sans-serif; }
    .toolbar {
      padding:8px; background:#f5f5f5; border-bottom:1px solid #ccc;
      display:flex; flex-wrap:wrap; gap:6px; align-items:center;
    }
    .toolbar button,
    .toolbar select,
    .toolbar input[type="number"] {
      font-size:12px; padding:4px; cursor:pointer;
    }
    .toolbar .table-props {
      margin-left:auto; display:flex; gap:6px; align-items:center;
    }
    .editor-container {
      display:flex; height:calc(100vh - 42px);
    }
    .panel {
      flex:1; display:flex; flex-direction:column; border-right:1px solid #ddd;
    }
    .panel:last-child { border-right:none; }
    .panel-header {
      background:#eee; padding:6px 8px; font-weight:bold; border-bottom:1px solid #ccc;
    }
    .editor, textarea {
      flex:1; padding:10px; border:none; outline:none;
      font-family:inherit; font-size:14px; line-height:1.4;
      resize:none; overflow:auto;
    }
    textarea { background:#fafafa; border-top:1px solid #ddd; }
    table.selected { outline:2px solid #007acc; }
  </style>
</head>
<body>
  <div class="toolbar">
    <button onclick="cmd('bold')"><b>B</b></button>
    <button onclick="cmd('italic')"><i>I</i></button>
    <button onclick="cmd('underline')"><u>U</u></button>
    <select onchange="cmd('formatBlock', this.value)">
      <option value="">Format</option>
      <option value="h1">H1</option>
      <option value="h2">H2</option>
      <option value="p">P</option>
    </select>
    <button onclick="cmd('insertUnorderedList')">&bull; UL</button>
    <button onclick="cmd('insertOrderedList')">1. OL</button>
    <button onclick="insertTable()">Table</button>
    <div class="table-props">
      W:<input type="number" id="pw" min="1" placeholder="px">
      B:<input type="number" id="pb" min="0">
      CS:<input type="number" id="pcs" min="0">
      CP:<input type="number" id="pcp" min="0">
      <button id="apply">Apply</button>
    </div>
  </div>

  <div class="editor-container">
    <div class="panel">
      <div class="panel-header">Visual</div>
      <div id="vis" class="editor" contenteditable="true"></div>
    </div>
    <div class="panel">
      <div class="panel-header">HTML</div>
      <textarea id="code" class="editor"></textarea>
    </div>
  </div>

  <script>
    const vis = document.getElementById('vis');
    const code = document.getElementById('code');
    let selTable = null;

    function cmd(c,v=null){ document.execCommand(c,false,v); syncCode(); }

    function syncCode(){
      code.value = vis.innerHTML;
    }
    function syncVis(){
      vis.innerHTML = code.value;
    }

    vis.addEventListener('input', syncCode);
    code.addEventListener('input', syncVis);

    // Insert a simple table
    function insertTable(){
      const r=+prompt('Rows?','2'), c=+prompt('Cols?','2');
      if(r>0&&c>0){
        let t='<table border="1" cellspacing="0" cellpadding="4">';
        for(let i=0;i<r;i++){
          t+='<tr>';
          for(let j=0;j<c;j++) t+='<td>Cell</td>';
          t+='</tr>';
        }
        t+='</table>';
        cmd('insertHTML', t);
      }
    }

    // Click to select a table and fill toolbar inputs
    vis.addEventListener('click', e=>{
      document.querySelectorAll('table.selected').forEach(t=>t.classList.remove('selected'));
      const t = e.target.closest('table');
      if(t){
        selTable = t;
        t.classList.add('selected');
        document.getElementById('pw').value  = t.getAttribute('width')      || '';
        document.getElementById('pb').value  = t.getAttribute('border')     || '';
        document.getElementById('pcs').value = t.getAttribute('cellspacing')|| '';
        document.getElementById('pcp').value = t.getAttribute('cellpadding')|| '';
      }
    });

    // Apply toolbar props back to the selected table
    document.getElementById('apply').onclick = ()=>{
      if(!selTable) return;
      const w = document.getElementById('pw').value;
      const b = document.getElementById('pb').value;
      const cs= document.getElementById('pcs').value;
      const cp= document.getElementById('pcp').value;
      if(w)  selTable.setAttribute('width', w);
      if(b)  selTable.setAttribute('border', b);
      if(cs) selTable.setAttribute('cellspacing', cs);
      if(cp) selTable.setAttribute('cellpadding', cp);
      syncCode();
    };

    // Initialize
    vis.innerHTML = '<p>Start typingâ€¦</p>';
    syncCode();
  </script>
</body>
</html>
